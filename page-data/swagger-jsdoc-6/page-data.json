{"componentChunkName":"component---src-templates-post-template-js","path":"/swagger-jsdoc-6","webpackCompilationHash":"b6bef1d996d1ad2e054c","result":{"data":{"markdownRemark":{"id":"07257fc0-cab5-51b9-afa0-05586df1ef57","html":"<h2 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p><a href=\"https://github.com/Surnet/swagger-jsdoc\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">swagger-jsdoc</code></a> is an open source project I’ve been trying to maintain in the last couple of years. <a href=\"https://github.com/Surnet/swagger-jsdoc/pull/27\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">My first commit</a> was a suggestion for adding a CLI. As a full-time PHP developer in 2016 it was a struggle to wrap my head around Node.js-specific concepts, but my free time spent on the project paid off well later.</p>\n<p>More than 4 years later, a lot of things have changed. I use JavaScript full-time and Node.js has been introducing new concepts, functionalities and tools, etc. It’s been crazy. Or rather - normal for the JavaScript community :)</p>\n<p>At any case, since I started maintaining <code class=\"language-text\">swagger-jsdoc</code> little after my first commit, the library was mostly in maintenance mode. Several improvements were introduced by community-driven pull requests and dozens of bug fixes were merged. Still, I think the real feature-milestone until 2020 was the added <a href=\"https://github.com/Surnet/swagger-jsdoc/pull/122\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">support for OpenAPI specification</a>. I’m assuming basing on the raise of <a href=\"https://npm-stat.com/charts.html?package=swagger-jsdoc&#x26;from=2016-02-08&#x26;to=2018-01-08\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">0-~64k monthly downloads in the first period</a> compared to <a href=\"https://npm-stat.com/charts.html?package=swagger-jsdoc&#x26;from=2018-01-08&#x26;to=2020-12-23\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">~60k to ~820k</a> in the second period after v3.</p>\n<p><code class=\"language-text\">swagger-jsdoc</code> is getting close to 1m (like million) monthly downloads and 1k (like thousand) github starts in the end of 2020. For me, as a maintainer of the project, this means a lot. In order to say “thank you” back to the people putting their trust in the project, I’ve been doing some refactoring since October 2020 for which I’ll share more in the following sections.</p>\n<h2 id=\"for-users\"><a href=\"#for-users\" aria-label=\"for users permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For users</h2>\n<p>The following section is targeted for people downloading and using <code class=\"language-text\">swagger-jsdoc</code>.</p>\n<ul>\n<li>added support for coffeescript style jsDoc comments</li>\n<li>added support for yaml anchors and references between separate documents</li>\n<li>added support for custom encoding which is not utf8 in input files</li>\n<li>added support for <code class=\"language-text\">x-webhooks</code> extension</li>\n</ul>\n<h2 id=\"for-maintainers\"><a href=\"#for-maintainers\" aria-label=\"for maintainers permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For maintainers</h2>\n<p>If you are a maintainer of the project, or you maintain a project closely related to <code class=\"language-text\">swagger-jsdoc</code>, have in mind the following changes:</p>\n<ul>\n<li><code class=\"language-text\">lts/erbium</code> is now used instead of <code class=\"language-text\">lts/dubnium</code></li>\n<li>Continuation-passing style (using callbacks) have been replaced by sync functions for consistency.</li>\n<li>Promises and async/await has been used whenever possible.</li>\n<li><a href=\"https://github.com/eemeli/yaml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">eemeli/yaml</a> is now used instead of <a href=\"https://github.com/nodeca/js-yaml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nodeca/yaml</a> as <code class=\"language-text\">eemeli/yaml</code> provides low-level APIs which were necessary for handling yaml references between separate documents.</li>\n<li>CLI has been simplified and commander has become a bit reduntant</li>\n<li>Tests have been reorganized to match their corresponding module under test or an application.</li>\n<li>Jest is now used instead of Mocha.</li>\n<li>Github actions running tests instead of Circle CI.</li>\n<li>Changelog has been autogenerated to facilitate tracking changes in history.</li>\n<li>Many helpers have been moved inline in order to make specific functions more domain-focused.</li>\n<li>JsDoc annotations have been updated.</li>\n<li>Documentation has been updated.</li>\n</ul>\n<h2 id=\"breaking-changes\"><a href=\"#breaking-changes\" aria-label=\"breaking changes permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Breaking changes</h2>\n<p>Here are a few scenarios in which you should pay extra attention.</p>\n<p>Regarding previously exposed helper functions <code class=\"language-text\">createSpecification()</code>, <code class=\"language-text\">parseApiFileContent()</code>, <code class=\"language-text\">updateSpecificationObject()</code>, <code class=\"language-text\">finalizeSpecificationObject()</code>, which have been exported from the main module until v5 - the following changes have been applied:</p>\n<ul>\n<li>none of them will be exported from the main module anymore</li>\n<li><code class=\"language-text\">createSpecification()</code> has been renamed to <code class=\"language-text\">prepare()</code> and is part of <code class=\"language-text\">src/specification.js</code>. Can be swapped without any changes in the input data structure. In short, change to <code class=\"language-text\">const { build } = require(&#39;swagger-jsdoc/src/specification&#39;);</code> and invoke in the same way as before.</li>\n<li><code class=\"language-text\">parseApiFileContent()</code> has been renamed to <code class=\"language-text\">extractAnnotations()</code> and is part of <code class=\"language-text\">src/utils.js</code>. It has a new signature <code class=\"language-text\">function extractAnnotations(filePath, encoding = &#39;utf8&#39;) {}</code> which makes it more useful directly passing a <code class=\"language-text\">filePath</code> rather than a <code class=\"language-text\">fileConents</code>. Returns the same data structure.</li>\n<li><code class=\"language-text\">updateSpecificationObject()</code> has been removed in favor of <code class=\"language-text\">src/specification/build</code> function which prepares and corrects all annotations before they get organized in a specification.</li>\n<li><code class=\"language-text\">finalizeSpecificationObject()</code> has been renamed to <code class=\"language-text\">finalize()</code>. See migration notes for <code class=\"language-text\">prepare()</code> from above.</li>\n</ul>\n<p>With regards to working with yaml: keep in mind that the parser has been changed to <a href=\"https://github.com/eemeli/yaml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">eemeli/yaml</a> instead of <a href=\"https://github.com/nodeca/js-yaml\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">nodeca/yaml</a>. That was necessary in order to be able to handle “yaml copy/paste” anchors/references between separate documents. As a result of this change in parsing library, no errors will be thrown from v6 on, as they will be only reported in the end of the specifiction creation. Basing on existing tests in <code class=\"language-text\">swagger-jsdoc</code> it’s unlikely that new errors appear due to parser change, but if there are: please <a href=\"https://github.com/Surnet/swagger-jsdoc/issues\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">report them</a>.</p>\n<p>The way CLI is used can also cause breaking changes when <code class=\"language-text\">apis</code> information has been added in the <code class=\"language-text\">swaggerDefinition</code>. This object has been wrongly accepting information from the <code class=\"language-text\">apis</code> property which you might have been warned about if inheriting types from OpenAPI definitions. The solution: take the value of <code class=\"language-text\">apis</code> and pass it to the CLI as arguments. Here’s <a href=\"https://github.com/Surnet/swagger-jsdoc/releases/tag/v6.0.0-rc.4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">an example</a>.</p>\n<h2 id=\"conclusions\"><a href=\"#conclusions\" aria-label=\"conclusions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusions</h2>\n<p>Many thanks to all contributors helping with issue reports, documentation, code changes and suggestions in overall! I hope the new version 6 will mark a new more accessible and more maintainable version of <code class=\"language-text\">swagger-jsdoc</code> which has proven to be a useful tool for so many people!</p>","fields":{"slug":"swagger-jsdoc-6","tagSlugs":["/tag/java-script/","/tag/tools/"]},"frontmatter":{"date":"2020-12-23T00:00:00+02:00","description":"Short overview of a new major version.","tags":["JavaScript","Tools"],"title":"swagger-jsdoc v6","socialImage":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"swagger-jsdoc-6"}}}