{"componentChunkName":"component---src-templates-post-jsx","path":"/admin-ui-gatsby-static-site-generator","webpackCompilationHash":"628be610361b8553fe21","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Admin UI for Gatsby static site generator","date":"2017-08-16T23:33:31.000Z","tags":["JAMStack","JavaScript","GatsbyJS"]},"timeToRead":3,"html":"<p><strong>There is a newer post about how to setup an Admin UI for GatsbyJS, and it's easier. Check it out <a href=\"/cms-gatsbyjs\">here</a>.</strong></p>\n<h2 id=\"introduction\"><a href=\"#introduction\" aria-label=\"introduction permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introduction</h2>\n<p>Recently, I was looking into <a href=\"https://www.gatsbyjs.org/\">Gatsby.js</a> as a generator for a blog site. As many others, I one of the first steps into using the system as other popular CMS solutions, I started to look around for an online back-end UI for the content creation part. I found this list of <a href=\"https://headlesscms.org/\">headless CMS options</a> and since <a href=\"https://forestry.io/\">forestry</a> (the service I use for my blog) does not support Gatsby, I decided to try <a href=\"https://www.netlifycms.org/\">NetlifyCMS</a>. This tutorial will be about it :)</p>\n<p>I'm not going into details on the separate services and software packages, their advantages and super features. Rather, I will keep the tutorial concise on how to integrate the systems.</p>\n<p>If you like more background about the JAM stack, you can see previous mentions <a href=\"/march-digest-2017/#jam-stack\">here</a> and <a href=\"/releasing-new-blog/\">here</a> ;)</p>\n<h3 id=\"start\"><a href=\"#start\" aria-label=\"start permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Start</h3>\n<p>For the tutorial, assume I'm speaking about <a href=\"https://github.com/Vagr9K/gatsby-advanced-starter\">gatsby advanced starterkit</a> although same principles apply to which-ever starterkit or gatsby setup. The important part is to have markdown as data source, as well as well-defined front-matter parsed by <a href=\"https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-transformer-remark\">gatsby-transformer-remark</a> and exposed to a GraphQL API within the Gatsby. In short, make sure you have markdown files so that the information you write is \"understood\" by NetlifyCMS and Gatsby, and others.</p>\n<h3 id=\"netlifycms\"><a href=\"#netlifycms\" aria-label=\"netlifycms permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NetlifyCMS</h3>\n<p>It's an open source decoupled back-end built on React, which <a href=\"https://www.netlifycms.org/docs/intro/\">integrates with Github API</a>. I personally like this idea, because publishing work-flows actually translate to steps developers already take on code repositories.</p>\n<p>To use this admin UI application easily, you can integrate it with the Netlify service which will watch for changes in your github repository and do the necessary builds, previews and deploys.</p>\n<p>To make Gatsby work with this tutorial, you will need to:</p>\n<ul>\n<li>make a <a href=\"https://www.gatsbyjs.org/docs/building-with-components/#page-components\">page component</a> for the admin page, this should include the scripts loading the NetlifyCMS app</li>\n<li>include the <code class=\"language-text\">config.yml</code> file in <code class=\"language-text\">static</code> folder of Gatsby, as it does not need optimization by webpack</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 720px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/90e5ed5479001f3c05dac406677d18e3/f3361/deployment-settings-netlify.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.772014475271405%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAAwUlEQVQY031Riw6DIBDj/39zTqPyEAQPAdkKLkazzaYhl8vRHoWtIVjn3LLM1m7blitef5CvYOT949k2bdd0XYxxH4JISimCH6TClKB+1mJwlkoR0SGMQmnd9gOXcuB8FAJnz/nABZE/+zNHhK5byIcQqxv0J22kmqCLOtVOqohXlrVHIfuR63kuC1dnbQxssU6unTMvb/brqozBTcR2OBtrESFG45fbxRkTmEbUuHyT808wRBnqbxXnCJ1cuSPf8w3zE9UUIEBEIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Deployment settings in Netlify\"\n        title=\"Deployment settings in Netlify\"\n        src=\"/static/90e5ed5479001f3c05dac406677d18e3/6da3e/deployment-settings-netlify.png\"\n        srcset=\"/static/90e5ed5479001f3c05dac406677d18e3/b059c/deployment-settings-netlify.png 180w,\n/static/90e5ed5479001f3c05dac406677d18e3/8f8c6/deployment-settings-netlify.png 360w,\n/static/90e5ed5479001f3c05dac406677d18e3/6da3e/deployment-settings-netlify.png 720w,\n/static/90e5ed5479001f3c05dac406677d18e3/f3361/deployment-settings-netlify.png 829w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>If you have configured Netlify service to take your master branch and execute <code class=\"language-text\">npm run build</code> on new deployments, a new push will already give you access to the admin UI app.</p>\n<h3 id=\"gatsby\"><a href=\"#gatsby\" aria-label=\"gatsby permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby</h3>\n<p>This side might seem a bit more complex compared to copy-paste and rework to a small React component, but it's actually a simple process.</p>\n<ul>\n<li>move all markdown files into 1 folder, you need a flat structure, otherwise NetlifyCMS won't be able to list the existing content in the dashboard</li>\n<li>configure the <code class=\"language-text\">SiteConfig.js</code> ​to point to this folder containing the files</li>\n<li>configure also, by the way, configure also the <code class=\"language-text\">config.yml</code> of Netlify to be the same target</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 720px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cb87ef9e863099d1e6244445d11a3038/5e6b6/netlify-deployments.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.37373737373737%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA1UlEQVQY021Qjc7DIAj0/d90/dRarcif3a5ttiz5RggS7oSDYO5qBheRO/KVuPvxy8yMmUGYcwZxH6rIJpDngdf9TI/nbxPVUttgASmw+yJMIinlJaVSK7C/lNdt+/8TcoDktey9o3+APplTzGpr8LbvAGiMwWyX3Zo+mm8ODUY5dOGFeiXC2EeMqZRcSkxrzKc/YiJ0+dxFFbRLYEMeUOq4gSh0QjO6lu2Mbe/1mnCe4W2QvZYNhE7k98FWUxKNKWMUAMR7BTSB/u+dVS3mjLX3TtjiBezFlqYPgZF4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Netlify deployments\"\n        title=\"Netlify deployments\"\n        src=\"/static/cb87ef9e863099d1e6244445d11a3038/6da3e/netlify-deployments.png\"\n        srcset=\"/static/cb87ef9e863099d1e6244445d11a3038/b059c/netlify-deployments.png 180w,\n/static/cb87ef9e863099d1e6244445d11a3038/8f8c6/netlify-deployments.png 360w,\n/static/cb87ef9e863099d1e6244445d11a3038/6da3e/netlify-deployments.png 720w,\n/static/cb87ef9e863099d1e6244445d11a3038/5e6b6/netlify-deployments.png 990w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Check if all works, and if yes, make another deployment to the your repository. I personally removed all the unnecessary content manually and had to flush the cache of the last deploy in the console.</p>\n<h3 id=\"the-result\"><a href=\"#the-result\" aria-label=\"the result permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The result</h3>\n<p>You have a modern tool-chain of React, GraphQL, webpack, and similar, called Gatsby, and you have a working administration UI to manage your content when you're lazy to open your editor ;)</p>\n<p>Here's a <a href=\"https://github.com/kalinchernev/kalinchernev.github.io/blob/blog/static/videos/netlify-cms-gatsby.mp4\">video of the process</a> from making a draft which is a pull request, opening a preview and then publishing the change which gets automatically deployed on the site.</p>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"admin-ui-gatsby-static-site-generator"}}}