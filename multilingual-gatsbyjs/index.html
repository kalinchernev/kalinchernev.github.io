<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-jsx-19e25614a4d22bbbf0e1.js" as="script"/><link rel="preload" href="/component---src-templates-post-jsx-03c2578b4447572f077c.js" as="script"/><link rel="preload" href="/path---multilingual-gatsbyjs-58f039f00f809adb7e32.js" as="script"/><link rel="preload" href="/app-41292f0edcdeccecb068.js" as="script"/><link rel="preload" href="/commons-fb600ac171029e118017.js" as="script"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:137.5%/1.56 'Source Sans Pro',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.7);font-family:'Source Sans Pro',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;position:relative;left:50%;transform:translateX(-50%);}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:200;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:200;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:200;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:200;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:200;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;color:hsla(0,0%,0%,0.85);font-family:'Source Sans Pro',sans-serif;font-weight:200;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}ul{margin-left:1.56rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.56rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;font-size:0.85rem;line-height:1.56rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;font-size:1rem;line-height:1.56rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}blockquote{margin-left:0;margin-right:1.56rem;margin-top:0;padding-bottom:0;padding-left:1.17rem;padding-right:0;padding-top:0;margin-bottom:1.56rem;font-size:1.20112rem;line-height:1.56rem;color:hsla(0,0%,0%,0.6);border-left:0.39rem solid hsla(0,0%,0%,0.13);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.56rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.56rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.56rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.56rem;margin-bottom:calc(1.56rem / 2);margin-top:calc(1.56rem / 2);}li > ul{margin-left:1.56rem;margin-bottom:calc(1.56rem / 2);margin-top:calc(1.56rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.56rem / 2);}code{font-size:0.85rem;line-height:1.56rem;}kbd{font-size:0.85rem;line-height:1.56rem;}samp{font-size:0.85rem;line-height:1.56rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.04rem;padding-right:1.04rem;padding-top:0.78rem;padding-bottom:calc(0.78rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a{font-weight:200;}a{font-weight:400;color:#185D8B;text-decoration:none;}a:hover{color:#2a6496;text-decoration:underline;}@media only screen and (max-width:768px){html{font-size:100%;line-height:24.88px;}blockquote{margin-left:-1.17rem;margin-right:0;padding-left:0.78rem;}table{font-size:0.83255rem;line-height:1.56rem;}}</style><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,400i,700" rel="stylesheet" type="text/css"/><title data-react-helmet="true">Multilingual Gatsby.js | Kalin Chernev</title><meta data-react-helmet="true" name="description" content=""/><meta data-react-helmet="true" name="keywords" content=""/><meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0 shrink-to-fit=no"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#ffffff"/><style id="gatsby-inlined-css">code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.class-name,.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.src-layouts-css----styles-module---main---3hOy9{margin:0 auto;max-width:720px;padding:1.25rem 1rem}.src-components-css----styles-module---header---2zWhO{background:#36648b;margin-bottom:1.45rem}.src-components-css----styles-module---header-heading---101pz{margin:0}.src-components-css----styles-module---header-layout---1uhr_{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin:0 auto;max-width:720px;padding:1.45rem 1.0875rem}.src-components-css----styles-module---logo---SfU8_{color:#fff;text-decoration:none;text-shadow:none;background:none}.src-components-css----styles-module---logo---SfU8_:hover{color:#fff;opacity:.8}.src-components-css----styles-module---post-meta---w1c3N{color:#545454;display:-ms-flexbox;display:flex;font-size:.8rem}.src-components-css----styles-module---post-time---1sQsi{padding-left:0;text-transform:uppercase;white-space:nowrap}.src-components-css----styles-module---post-timeToRead---T-kZB{font-size:.8rem;font-style:italic;margin-bottom:.4rem}.src-components-css----styles-module---post-tags---1BKid{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;list-style:none;margin:0 .8rem}.src-components-css----styles-module---post-tag---3ePpn{color:#9eabb3;margin-right:.6rem;margin-bottom:.2rem}.src-components-css----styles-module---post-tag---3ePpn a{color:#545454}.src-components-css----styles-module---social-media---2Jk6G{display:-ms-flexbox;display:flex;list-style:none}.src-components-css----styles-module---social-media---2Jk6G li{margin-right:1rem}.src-components-css----styles-module---social-media---2Jk6G a{color:#fff}.gatsby-resp-image-image{right:0;left:50%!important}.src-templates-css----styles-module---gatsby-resp-image-image---2R7FB{right:0;left:50%!important}.src-templates-css----styles-module---listing---349Sd{list-style-type:none;margin-left:0}.src-templates-css----styles-module---listing---349Sd a{text-decoration:none}.src-templates-css----styles-module---listing---349Sd a h3:hover{text-decoration:underline}.src-templates-css----styles-module---listing---349Sd a p{color:#000}.src-pages-css----styles-module---listing---YM0fg{list-style-type:none;margin-left:0}.src-pages-css----styles-module---listing---YM0fg a{text-decoration:none}.src-pages-css----styles-module---listing---YM0fg a h3:hover{text-decoration:underline}.src-pages-css----styles-module---listing---YM0fg a p{color:#000}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-769855415"><!-- react-empty: 2 --><div class="src-components-css----styles-module---header---2zWhO" data-reactid="3"><div class="src-components-css----styles-module---header-layout---1uhr_" data-reactid="4"><div data-reactid="5"><h1 class="src-components-css----styles-module---header-heading---101pz" data-reactid="6"><a class="src-components-css----styles-module---logo---SfU8_" href="/" data-reactid="7">Kalin Chernev</a></h1><!-- react-text: 8 -->Writing crystallizes thought and thought produces action<!-- /react-text --></div><ul class="src-components-css----styles-module---social-media---2Jk6G" data-reactid="9"><li data-reactid="10"><a title="Link to a LinkedIn profile" href="https://www.linkedin.com/in/kalinchernev/" data-reactid="11">LinkedIn</a></li><li data-reactid="12"><a title="Link to a Github profile" href="https://github.com/kalinchernev" data-reactid="13">Github</a></li><li data-reactid="14"><a title="Link to a Twitter profile" href="https://twitter.com/kalinchernev" data-reactid="15">Twitter</a></li></ul></div></div><div class="src-layouts-css----styles-module---main---3hOy9" data-reactid="16"><div data-reactid="17"><!-- react-empty: 18 --><div data-reactid="19"><section class="src-components-css----styles-module---post-meta---w1c3N" data-reactid="20"><time class="src-components-css----styles-module---post-time---1sQsi" datetime="2019-09-01T22:00:00.000Z" data-reactid="21">Monday, September 2, 2019</time><ul class="src-components-css----styles-module---post-tags---1BKid" data-reactid="22"><li class="src-components-css----styles-module---post-tag---3ePpn" data-reactid="23"><a title="Click here to see all posts about i18n" href="/tags/i18n" data-reactid="24"><!-- react-text: 25 -->#<!-- /react-text --><!-- react-text: 26 -->i18n<!-- /react-text --></a></li><li class="src-components-css----styles-module---post-tag---3ePpn" data-reactid="27"><a title="Click here to see all posts about l10n" href="/tags/l10n" data-reactid="28"><!-- react-text: 29 -->#<!-- /react-text --><!-- react-text: 30 -->l10n<!-- /react-text --></a></li><li class="src-components-css----styles-module---post-tag---3ePpn" data-reactid="31"><a title="Click here to see all posts about javascript" href="/tags/javascript" data-reactid="32"><!-- react-text: 33 -->#<!-- /react-text --><!-- react-text: 34 -->JavaScript<!-- /react-text --></a></li><li class="src-components-css----styles-module---post-tag---3ePpn" data-reactid="35"><a title="Click here to see all posts about gatsbyjs" href="/tags/gatsbyjs" data-reactid="36"><!-- react-text: 37 -->#<!-- /react-text --><!-- react-text: 38 -->GatsbyJS<!-- /react-text --></a></li></ul></section><div class="src-components-css----styles-module---post-timeToRead---T-kZB" data-reactid="39"><!-- react-text: 40 -->Approximately <!-- /react-text --><!-- react-text: 41 -->10<!-- /react-text --><!-- react-text: 42 --> minutes to read ...<!-- /react-text --></div></div><h1 data-reactid="43">Multilingual Gatsby.js</h1><div data-reactid="44"><h2 id="introduction"><a href="#introduction" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>There are 24 official languages in the European Union. Creating a Gatsby.js website in so many languages is an edge case for which the <a href="https://www.gatsbyjs.org/docs/localization-i18n/">guide on localization and internationalization with Gatsby.js</a> might not help.</p>
<p>In this article I'll reflect on the topic of i18n with Gatsby.js, the available plugins and core APIs. Mostly, how to use core APIs to create a scalable system for delivering multilingual static sites.</p>
<h2 id="problem-analysis"><a href="#problem-analysis" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problem analysis</h2>
<p>In my opinion, when evaluating approaches/tools for multilingualism with Gatsby.js, the solution should:</p>
<ul>
<li>Produce translated strings in both client/server rendered components.</li>
<li>Follow best practices, using battle-tested utilities.</li>
<li>Follow React.js patterns.</li>
</ul>
<p>In short, the tool or the approach taken to solve the issue should be maintenable.</p>
<h2 id="research"><a href="#research" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Research</h2>
<p>When working on a Gatsby.js project, a research phase would usually consist of browing the following sources:</p>
<ul>
<li><a href="https://www.gatsbyjs.org/plugins/">Community plugins</a></li>
<li><a href="https://github.com/gatsbyjs/gatsby/tree/master/packages">Core plugins</a></li>
<li><a href="https://github.com/gatsbyjs/gatsby/tree/master/examples">Examples</a></li>
</ul>
<p>When it comes to researching for "i18n":</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/i18n-plugins-gatsbyjs-e727557e69d90cdca045210eea438905-9572f.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 696px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 163.50574712643677%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAhCAYAAADZPosTAAAACXBIWXMAAAsSAAALEgHS3X78AAADKklEQVRIx61W2W7bMBD0//dL+tw8tij6EiO3kzrHQ1yfCBJL1n1fU84yFBTFTu0iBBakKXK4uzNcegA0sFYBkjhD3dQoigKmNU2Duq71uG7kt7G60j0b15jxoKpqfP0yxPD7NX7++oGjb0e4vLyUj1VVYTFf4uVljSzL8GcyxXy2gGXZSPwC1txHYCXKmRTz+QKz6RwDdQ7iIEdZlEizFGmaIo7j1sOyLMU4pveFWlfVFYqsQmAniJxUeajX5XmuAF9dNb1pDMOEYkLvhlxkyoEwRxYVKvy63TfQJ5cSHr0Lw7AF+8gEGM1rFBWYOo4HdCxNM3F3uVzi4eGh9XgfI3iapF1A8/F9uIeaAHLgeR6cjQPf9ztZfJvTfVrrIfNHl9n3Fxxqr4Ba0PSW9FelJsiEQVn0We7mkI0c2LaNAQFOTk5wcXGBq6srDIdDjMe/cXZ2JqnYFRob97qOK6BBEOD29lZ76Hm+TNCYR0onCEJEUaxErm5Cksgc+y5g10Puvbu704Cu64o37Df2Bp7riRE88AMBE9I8f2tu3wD+D5PbbtYbD9frtSoAL9I/Pz/vxaYpHiTPAI7HY03K9fVI0HlL7u/v9/aWzDItVAXHdEg8jMIIoSKBBDBnXOQo9nw1dhxH8ivEyW9XmO1rlr9JmgaMFKACZU8QU8ISdQAP4V1lPaRxDTf2w2ek/HYwKbtaC0hXmTva4+OjiHMymUjPOXO/t5FS5IXoVV/dDiABFouFGMer1QpPT0+YTqeyqAvYvymJlK5KTAD5kYQw8STHVYJmPvmbebTV+0GjsEnQWr0v1tp6R0obsnk3SD17UyTMqf2aZ+Y+nZT+TWkBOTg/P5en8+bmBqenp6L40WjUXvwPha30KRGaHHIT65gWr6fGGykG/Jhn+nllGriZfTctJl06FZ0csrKYKsOE80bI3GYjxttB4xoKnyRl6rCtIX+6sEU2YSgSoZlCyp5XbdfbYuapDhN6m0MSQONTcHx8LOSQqNls9k7UXYaZV+rT/F1pAWNV6ukViwJ7U+q3yeOfstEhR1IgOUGmGS5l0A1tm4cHC3uXd7teQAL+BQnuC7qmdzyNAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="i18n plugins Gatsby.js"
        title=""
        src="/static/i18n-plugins-gatsbyjs-e727557e69d90cdca045210eea438905-9572f.png"
        srcset="/static/i18n-plugins-gatsbyjs-e727557e69d90cdca045210eea438905-8221e.png 180w,
/static/i18n-plugins-gatsbyjs-e727557e69d90cdca045210eea438905-2af7d.png 360w,
/static/i18n-plugins-gatsbyjs-e727557e69d90cdca045210eea438905-9572f.png 696w"
        sizes="(max-width: 696px) 100vw, 696px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Trying to get information about the first one <code class="language-text">gatsby-plugin-i18n</code>, it leads to Github search <code class="language-text">https://github.com/search?q=gatsby-plugin-i18n</code> which shows several repositories, some of them are forks of a very close relation.</p>
<p>The first one <a href="https://github.com/angeloocana/gatsby-plugin-i18n">angeloocana/gatsby-plugin-i18n</a> uses <code class="language-text">react-intl</code> and <code class="language-text">i18next</code>. Looks promising with over 210 stars and separate packages for per-topic solutions. However, it automatically goes out of the shortlist - it will not be ok to have 24 files for every single page. Imagine a site with 10 pages which will explode to managing 240 files for a simple site!</p>
<p>The second one <a href="https://github.com/ikhudo/gatsby-i18n-plugin">ikhudo/gatsby-i18n-plugin</a> also uses <code class="language-text">i18next</code>. Has an unofficial? mirror at <a href="https://github.com/hupe1980/gatsby-i18n">hupe1980/gatsby-i18n</a>. Looking at code of <code class="language-text">gatsby-i18n</code> and <code class="language-text">gatsby-plugin-i18next</code> packages we see that documentation is scarce and both haven't been updated very frequently.</p>
<p>That's confusing: <code class="language-text">gatsby-plugin-18</code> vs <code class="language-text">gatsby-18n-plugin</code>, first being a "no-no" and second one being "can't start the starters". ðŸ¤”</p>
<p>The third plugin in the list is <a href="https://github.com/wiziple/gatsby-plugin-intl"><code class="language-text">wiziple/gatsby-plugin-intl</code></a> uses <code class="language-text">react-intl</code>. Shares approach and issues mentioned in <code class="language-text">angeloocana/gatsby-plugin-i18n</code>: we can't afford per-language page.</p>
<p>Lastly, checking whether any of the top (most downloaded) plugins is used in a <a href="https://github.com/gatsbyjs/gatsby/tree/master/packages">core plugin</a> or an <a href="https://github.com/gatsbyjs/gatsby/tree/master/examples/using-i18n">example</a>: the answer is no.</p>
<p>It's easy to see that <code class="language-text">react-intl</code> and <code class="language-text">i18next</code> are the go-to solutions in terms of using i18n frameworks, though at the same time</p>
<p><strong>top plugins are either not scalable or are not production-ready.</strong></p>
<p>Coming back to <code class="language-text">wiziple/gatsby-plugin-intl</code> plugin which has a special <a href="https://github.com/wiziple/gatsby-plugin-intl#why"><strong>WHY</strong> section</a>:</p>
<blockquote>
<p>When you build multilingual sites, Google recommends using different URLs for each language version of a page rather than using cookies or browser settings to adjust the content language on the page.</p>
</blockquote>
<p>Looking at the <a href="https://github.com/gatsbyjs/gatsby/tree/master/examples/using-i18n">example of using i18n</a> it says:</p>
<blockquote>
<p>Example site that demonstrates how to build Gatsby sites with multiple languages (Internationalization / i18n) without any third-party plugins or packages. Per language a dedicated page is built (so no client-side translations) which is among other things important for SEO.</p>
</blockquote>
<p>Having these and the awareness about the state of i18n plugins, it's natural to start on a new path of thinking: <strong>HOW</strong> to solve the problem without plugins?</p>
<h2 id="createpage-and-pagecontext"><a href="#createpage-and-pagecontext" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>createPage() and pageContext</h2>
<p>From the previous section we reached a point where we know that we can achieve i18n with functions from Gatsby.js's core. Let's make a short analysis of the <a href="https://github.com/gatsbyjs/gatsby/tree/master/examples/using-i18n">reference example</a>.</p>
<p>Starting from <code class="language-text">gatsby-node.js</code>, the file where we can use <a href="https://www.gatsbyjs.org/docs/node-apis/">Gatsby Node APIs</a>, we see <a href="https://github.com/gatsbyjs/gatsby/blob/master/examples/using-i18n/gatsby-node.js#L17-L39">usage of <code class="language-text">createPage()</code></a>:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>locales<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>lang <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Use the values defined in "locales" to construct the path</span>
  <span class="token keyword">const</span> localizedPath <span class="token operator">=</span> locales<span class="token punctuation">[</span>lang<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">default</span>
    <span class="token operator">?</span> page<span class="token punctuation">.</span>path
    <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>locales<span class="token punctuation">[</span>lang<span class="token punctuation">]</span><span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// Pass on everything from the original page</span>
    <span class="token operator">...</span>page<span class="token punctuation">,</span>
    <span class="token comment">// Since page.path returns with a trailing slash (e.g. "/de/")</span>
    <span class="token comment">// We want to remove that</span>
    path<span class="token punctuation">:</span> <span class="token function">removeTrailingSlash</span><span class="token punctuation">(</span>localizedPath<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// Pass in the locale as context to every page</span>
    <span class="token comment">// This context also gets passed to the src/components/layout file</span>
    <span class="token comment">// This should ensure that the locale is available on every page</span>
    context<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>page<span class="token punctuation">.</span>context<span class="token punctuation">,</span>
      locale<span class="token punctuation">:</span> lang<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>This is already solving our issue with scalability, because we can define a list of 24 languages and loop through them, having a separate page for each language without creating physical files.</p>
<p>The part about <code class="language-text">context</code> and <code class="language-text">locale</code> is an example of how to <a href="https://www.gatsbyjs.org/docs/gatsby-internals-terminology/#pagecontext">pass a variable to GraphQL queries in Gatsby.js</a>, which can be seen in <a href="https://github.com/gatsbyjs/gatsby/blob/master/examples/using-i18n/src/pages/index.js#L35">code here</a>.</p>
<p>At the same time, passing data to <code class="language-text">context</code> is related to how <a href="https://www.gatsbyjs.org/docs/write-pages/">Gatsby.js creates pages</a>. For example, the <code class="language-text">public/page-data/de/page-data.json</code> of the example will contain:</p>
<div class="gatsby-highlight" data-language="json">
      <pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"componentChunkName"</span><span class="token operator">:</span> <span class="token string">"component---src-pages-index-js"</span><span class="token punctuation">,</span>
  <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"/de"</span><span class="token punctuation">,</span>
  <span class="token property">"webpackCompilationHash"</span><span class="token operator">:</span> <span class="token string">"ed7057ec19fc05f78011"</span><span class="token punctuation">,</span>
  <span class="token property">"result"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">"pageContext"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"isCreatedByStatefulCreatePages"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token property">"locale"</span><span class="token operator">:</span> <span class="token string">"de"</span><span class="token punctuation">,</span>
      <span class="token property">"dateFormat"</span><span class="token operator">:</span> <span class="token string">"DD.MM.YYYY"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>I've skipped <code class="language-text">result.data</code> to focus on <code class="language-text">result.pageContext.locale</code> ðŸ˜‰.</p>
<p>The example implementation is already clearly stating:</p>
<blockquote>
<p>Usage of a custom hook with GraphQL to access translations. That part can be replaced with a i18n library</p>
</blockquote>
<p>This means that the <a href="https://github.com/gatsbyjs/gatsby/blob/master/examples/using-i18n/src/components/useTranslations.js"><code class="language-text">useTranslations()</code></a></p>
<p>having the following implementation might need reconsideration:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> query <span class="token operator">=</span> graphql`
  query useTranslations <span class="token punctuation">{</span>
    rawData<span class="token punctuation">:</span> <span class="token function">allFile</span><span class="token punctuation">(</span>filter<span class="token punctuation">:</span> <span class="token punctuation">{</span> sourceInstanceName<span class="token punctuation">:</span> <span class="token punctuation">{</span> eq<span class="token punctuation">:</span> <span class="token string">"translations"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      edges <span class="token punctuation">{</span>
        node <span class="token punctuation">{</span>
          name
          translations<span class="token punctuation">:</span> childTranslationsJson <span class="token punctuation">{</span>
            hello
            subline
            backToHome
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span></code></pre>
      </div>
<p>And you might already see a few potential drawbacks of this approach:</p>
<ul>
<li>Each field to be used needs to be query-ied. Could be ok for a few fields, but what happens with a page of 30+ strings?</li>
<li>What about nested structures?</li>
<li>Data is <a href="https://www.gatsbyjs.org/docs/sourcing-from-the-filesystem/">sourced</a> which is ok for a use case of having a few files, but what happens on multiplication by 24?</li>
</ul>
<p>Using sourcing and GraphQL for pulling data into components demonstrates a good pattern of enabling usage of data on SSR, though it might not be the most scalabale approach for the long term.</p>
<h2 id="i18n-library"><a href="#i18n-library" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>i18n library</h2>
<p>Let's try to implement an i18n library in the example. For the demonstration we'll select i18next.</p>
<p>Following the <a href="https://react.i18next.com/guides/quick-start">quick start</a>, the example would have a basic implementation <a href="https://github.com/kalinchernev/using-i18n/commit/84702c14343b12ed83e81624df7c3d6dacb3d116">like this</a></p>
<p>NB: <code class="language-text">gatsby-plugin-layout</code> is used for convenience and simplification, not directly related to integration of i18next.</p>
<p>At this stage, a component can use <code class="language-text">useTranslation</code> in the following way:</p>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTranslation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-i18next'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LocaleContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../layouts'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Welcome</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> locale <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>LocaleContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> t<span class="token punctuation">,</span> i18n <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useTranslation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  i18n<span class="token punctuation">.</span><span class="token function">changeLanguage</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">'Using i18next'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Welcome<span class="token punctuation">;</span></code></pre>
      </div>
<p>Yes, the <code class="language-text">changeLanguage()</code> will be taken out to be more generic, as well as <code class="language-text">LocaleContext</code> does not need stay in the <code class="language-text">layout</code> any more, but we have a working example with 2 ways of translating content.</p>
<h2 id="refactoring"><a href="#refactoring" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refactoring</h2>
<p>As a <a href="https://github.com/kalinchernev/using-i18n/commit/1600a7bb28bff0ddb3d888d7ca00a3d765e8df7e">first step of refactoring</a> the current implementation, we can do the following:</p>
<ul>
<li>Take out <code class="language-text">resources</code> from the configuration file, as suggested in i18next quick start.</li>
<li>Use <a href="https://react.i18next.com/latest/i18nextprovider"><code class="language-text">I18nextProvider</code></a> to pass <code class="language-text">i18n</code> instance down to children, rather than relying on <code class="language-text">use(initReactI18next)</code> middleware.</li>
<li>Change locale/language context from the layout component.</li>
</ul>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">useEffect</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    i18n<span class="token punctuation">.</span><span class="token function">changeLanguage</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>locale<span class="token punctuation">]</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<ul>
<li>The surface of implementation in components now works as following:</li>
</ul>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useTranslation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-i18next'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Welcome</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> t <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useTranslation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">'Using i18next'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Welcome<span class="token punctuation">;</span></code></pre>
      </div>
<p>We still make use of the <a href="https://reactjs.org/docs/context.html">Context API</a> and we are able to access both <code class="language-text">location</code> and <code class="language-text">i18n</code> from components', regardless of their location in the hierarchy. No props drillin'.</p>
<p>However, after moving <code class="language-text">resources</code> to an external file and <code class="language-text">import</code>-ing it, we end up with:</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/i18n-client-side-1d11b8e63241f27a1c38fd1fa5b41fe4-844c7.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 720px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 75.20435967302453%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACMUlEQVQ4y5WU2ZKaUBCGefk8Qe5SWW5ymarczaiJNS6AiJGIcthlUVwQHGNe4E/3QZNUzWTx4qsj0KeXv7tV6u0CoW8gDsaoNgs87gWOO4cQ8vef2K1mqLcOnHELiT/CF6ONc+VD4cvl2sahmJOhg1MpcNo3NI6fh+9wMnloYJtZWMUmvrPDejuHPf2EKUWyJm2YoztYZgsT4x6x6CPxBli6/d9onlN6H9F3fzGAmPXgz3uoChvKJp1i6akIHDL0hhdUxHTmoY48+gv0PQ2YERKCM1cO5FXMujLLYPGAPFBlVpxBkx0HegZ38DN7dm7obSmBwtqxqOulSZEMZCE3x74Jlm2XW/h28KBUmzlc+wFzqytPLnkdGzeTUfnHHWVYXxzOuGSH0g81ZFR2Fmg3kfoqjk3JNpa+TiVPZOmxp0stOBob/JOLHY+cHBvWgIVNvF+jwQ2JRe+/SdwePrx/iczXeA4XWFF2nBm3nwd06WkoV19peJ+yX1lPKIlIqKhp05Tj3sU+G5EGA3I8RUFzmVC3S+p+WdhyHXkSJHI13cv6ubRVVzzUhYHzQUDZFx7O+UfU6T0CMZY6ssPI1alZfYRCI1TaiCFiV6OOmtQEQ47JI68hVXgqfYjBC1S51uxytRV0Sacuq5I8MqUEVwJniDSaILfu4LdeIe6+g995g+jzWwSd1/CnHYQUTG7Kddm5NAlF5H8RPrlMnlPWWb4nDQ+piSozUecTOgl+LmbSlkv/ASGGI4tc9h8SAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="i18n client-side"
        title=""
        src="/static/i18n-client-side-1d11b8e63241f27a1c38fd1fa5b41fe4-6f08c.png"
        srcset="/static/i18n-client-side-1d11b8e63241f27a1c38fd1fa5b41fe4-c1ddb.png 180w,
/static/i18n-client-side-1d11b8e63241f27a1c38fd1fa5b41fe4-aa93f.png 360w,
/static/i18n-client-side-1d11b8e63241f27a1c38fd1fa5b41fe4-6f08c.png 720w,
/static/i18n-client-side-1d11b8e63241f27a1c38fd1fa5b41fe4-844c7.png 734w"
        sizes="(max-width: 720px) 100vw, 720px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>Which is not ideal, because although we see translations in the browser on language switching, the resulting HTML pages are not having the translations in their corresponding languages, but in defaults. Translation happens client-side.</p>
<h2 id="loading-translations-resources-for-server-side-rendering-ssr"><a href="#loading-translations-resources-for-server-side-rendering-ssr" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loading translations resources for server-side rendering (SSR)</h2>
<p>After <a href="https://github.com/kalinchernev/using-i18n/commit/27d4791b37e0f2bd9df49cdfd74fc35c88676fa4">second refactoring</a>:</p>
<ul>
<li>The <code class="language-text">localeContext</code> is taken out from the layout component and moved to a separate file in order to avoid circular dependencies.</li>
<li><a href="https://github.com/kalinchernev/using-i18n/commit/27d4791b37e0f2bd9df49cdfd74fc35c88676fa4#diff-fda05457e393bada716f508859bfc604R9"><code class="language-text">resources</code> are <code class="language-text">require</code>-ed</a> in <code class="language-text">gatsby-node.js</code> and information is passed through <code class="language-text">context</code> again. Example: <code class="language-text">public/page-data/de/page-data.json</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript">
      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  <span class="token string">"componentChunkName"</span><span class="token punctuation">:</span> <span class="token string">"component---src-pages-index-js"</span><span class="token punctuation">,</span>
  <span class="token string">"path"</span><span class="token punctuation">:</span> <span class="token string">"/de"</span><span class="token punctuation">,</span>
  <span class="token string">"webpackCompilationHash"</span><span class="token punctuation">:</span> <span class="token string">"723c1b4c311ddaa3bf91"</span><span class="token punctuation">,</span>
  <span class="token string">"result"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"data"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"pageContext"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">"isCreatedByStatefulCreatePages"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">"locale"</span><span class="token punctuation">:</span> <span class="token string">"de"</span><span class="token punctuation">,</span>
      <span class="token string">"localeResources"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">"translation"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">"Using i18next"</span><span class="token punctuation">:</span> <span class="token string">"Using i18next (DE)"</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">"dateFormat"</span><span class="token punctuation">:</span> <span class="token string">"DD.MM.YYYY"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<ul>
<li><a href="https://github.com/kalinchernev/using-i18n/commit/27d4791b37e0f2bd9df49cdfd74fc35c88676fa4#diff-8be0da79bbc6e745de5b15ad04fefb43">i18next's initialization</a> moved to a separate file.</li>
<li>A <a href="https://reactjs.org/docs/higher-order-components.html">HOC</a> added, takes providers from layout component and passes <code class="language-text">i18n</code> instance and <code class="language-text">locale</code> to children. It's inspired by <a href="https://github.com/ikhudo/gatsby-i18n-plugin/blob/master/packages/gatsby-plugin-i18next/src/withI18next.js">this</a>).</li>
</ul>
<h2 id="summary"><a href="#summary" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Summary</h2>
<p>The multilingual setup we end up with uses core functionalities without plugins: i18next, React patterns (HOC), Context API, hooks, and Gatsby's <code class="language-text">createPage()</code>, which facilitate the data management.</p>
<p>Plugins do have their role into solving problems when they are in a specific scope or when they provide enough flexibility in terms of implementation. I think the reason the i18n plugins won't be the best fit for all types of multilingual sites is that they make assumptions which impose constraints on scalability of the project using them.</p>
<p>I hope this was a useful read for getting the way of thinking rather than the framework specifics.</p></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-41292f0edcdeccecb068.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","213130420965792":"component---src-templates-post-jsx-03c2578b4447572f077c.js","165698819012947":"component---src-templates-post-list-jsx-d14a095945701373ec2e.js","103555066157098":"component---src-templates-tags-jsx-113196bd386d04b3ea22.js","183328146348521":"component---src-pages-404-jsx-4503918ea3a16cfcdb75.js","213534597649335":"component---src-pages-index-jsx-7ec3d44ceac747fd8be7.js","60335399758886":"path----67206d53b627ad09240a.js","210333531512890":"path---offline-plugin-app-shell-fallback-a0e39f21c11f6a62c5ab.js","200691746053322":"path---multilingual-gatsbyjs-58f039f00f809adb7e32.js","160984381759483":"path---learning-vim-e11c821b8dc2f9304628.js","186347681687151":"path---solve-aws-lambda-timeout-limitations-a6a62b359c3de3a08e02.js","215799020141145":"path---solving-aws-lambda-timeouts-fargate-67341ef4bd12e782e824.js","19613488350017":"path---gatsbyjs-qa-linting-testing-c9cc50bab6f5e9ae84d4.js","26676594811490":"path---getting-better-with-graphql-98159e6f22926903e98d.js","190508315458854":"path---theming-documentationjs-6a964223e79a8a280194.js","157313778885209":"path---cms-gatsbyjs-5d2113679e6bd1cf474e.js","24514147235673":"path---escaping-macbook-pro-touchbar-470965e0a208d6e94766.js","238161999006987":"path---migrate-hugo-gatsby-2c46ba249f65d91bd55f.js","57645018698791":"path---tdd-serverless-jest-2d83b4718657899d2e7c.js","210780441067483":"path---learn-gatsbyjs-bbaa13245f7050930a82.js","161312236961755":"path---fixing-mobile-phone-3044ee72dab23cd82cb3.js","175124618843428":"path---admin-ui-gatsby-static-site-generator-4e4c376822d4d92819f6.js","200028962875982":"path---serverless-github-bot-aws-lambda-api-gateway-nodejs-5f75aad36040a359be8e.js","120507901039639":"path---personal-computers-personal-assistants-c8df1ecf1eced30c0d47.js","188652004370668":"path---releasing-new-blog-783a80d136fedf58ed2a.js","241466886276089":"path---march-digest-2017-3a5b262448642df4868c.js","78022607812443":"path---prototyping-apis-open-api-specification-2feb9e96286b2448970d.js","113770454835686":"path---february-digest-2017-5588f53b002101bb43c9.js","45132818249696":"path---graphql-guide-wish-found-before-f0550a5752b3fcfb127f.js","158748801037096":"path---reflecting-nodejs-design-patterns-e9093ec7163f67c067be.js","111648751794050":"path---january-digest-2017-b5c536d939d96f0d0805.js","62944401183182":"path---agile-documentation-api-driven-project-9da05d5d68f0560fdff6.js","273808356325320":"path---problem-first-problem-solving-f244c03febc7d3075ceb.js","34081568863440":"path---holiday-digest-2016-9b896ede529961b62689.js","137121618076878":"path---think-about-apps-not-websites-867f73e3a0406d295d57.js","111395020342515":"path---stream-adventure-triage-00e55fcd6b65f2ae9a84.js","57738659755549":"path---eu-data-portal-nodejs-client-028c803a613c1210bb44.js","237162670812729":"path---drupal-8-cloud-9-ide-fc0491833983dcebb2df.js","131259894111103":"path---debugging-nodejs-in-cloud-9-ide-e555d5b2158dfab9767d.js","124571513649567":"path---cloud-9-editor-8a7649a17d6529062e98.js","225646168226562":"path---drupalaton-2016-4009d0da824266058a56.js","125837075400254":"path---coding-battle-molengeek-ced48ed74e341b69ac5c.js","47145593380510":"path---coding-battle-microsoft-innovation-center-78551bbe046e0342f732.js","154799016109829":"path---coding-battle-take-eat-easy-6f55205cc514ba462c7d.js","229783079085155":"path---first-coding-battle-belgium-da8d8682ee6bb8baad43.js","219204398460716":"path---focus-community-good-services-2199e1aa4c7bb6d1bec4.js","45788430371641":"path---history-ca7388bd2f1c1ecf1e8b.js","163372391994044":"path---history-2-1bbea36b22eb638ccdab.js","262239731422010":"path---history-3-f35e4a62acea54463b17.js","88681480596478":"path---history-4-b2a41032d918942fa7a2.js","55702396619907":"path---tags-59ceec7da5d583cca8a8.js","86421346510870":"path---tags-i-18-n-e8ab3d690d31abfe48a1.js","134023274344889":"path---tags-l-10-n-a4d26538995bded34cf1.js","67335324583948":"path---tags-javascript-0ed9a095ca61902e8f12.js","111650216442129":"path---tags-gatsbyjs-7147e78f7e23b2b8646e.js","179677696783923":"path---tags-tools-b716a373ac6b84c1e9b4.js","34885552124715":"path---tags-productivity-d306986445485ebd145a.js","166610389901754":"path---tags-vim-a4975f443053127238ea.js","32765110312016":"path---tags-aws-949cbd456e845f006349.js","30909594585211":"path---tags-serverless-fb342690b18af2bf7fde.js","197808841186072":"path---tags-docker-b61c3bc763a72b1550cc.js","275687788891335":"path---tags-ecs-de1d5dacab82c003f1a4.js","230749677424456":"path---tags-jamstack-5ca42697bf5edabd5a4c.js","183519042959193":"path---tags-tdd-50f348392959a70d70ab.js","50597499775658":"path---tags-graphql-a797744e19e296412451.js","264708554881638":"path---tags-webdev-71477ae9a096d48811d4.js","8743152238705":"path---tags-documentation-00a81a738017c43476e5.js","1725791324835":"path---tags-documentationjs-336a3723203e5d1da11d.js","275481653870189":"path---tags-macbook-0b6ae3f6b241bb20582d.js","43819784967033":"path---tags-macos-9b0554ca1b1460f3305f.js","153958561265266":"path---tags-keyboard-394d9603eb72c252d826.js","45154319480143":"path---tags-nodejs-e3b762831c498fa01283.js","233330967837169":"path---tags-misc-ebb07eced04f31db0915.js","71834083963974":"path---tags-bots-e7eaa8a6c4f43225d7b2.js","191862733929324":"path---tags-assistants-e89bcc4963448f57970b.js","243984191904889":"path---tags-apps-c8cf2f1dd3307fbb5efa.js","92900522393385":"path---tags-blogging-250e196a29742c25fd03.js","157029411722283":"path---tags-medium-74cdca9deb1c14df030c.js","206118316212628":"path---tags-apis-25ef087508899d9bb1e1.js","380980657044":"path---tags-open-apis-bcc88a76971f61109d75.js","223455337592528":"path---tags-prototyping-574d66a398dde875d28c.js","40981256952865":"path---tags-design-patterns-3266a1c8b7ab0fdc47bf.js","86747829675984":"path---tags-cloud-8d0f8e278a20f5789e4c.js","262338835428570":"path---tags-swagger-3f2f6f80c6214b1e8171.js","25746651235685":"path---tags-problem-solving-4c301ce3677a975f0b93.js","201821146034242":"path---tags-meta-articles-29530cb83fb1dad70382.js","105966082061009":"path---tags-mobile-bbe17f77fbc91d4a1509.js","226325790954656":"path---tags-progressive-web-apps-490900a782dc53300e4a.js","52998803222938":"path---tags-open-source-f21f2d790dd4db7cc31e.js","34266060654147":"path---tags-open-data-15fe23852703b0a3fd7f.js","128140384679439":"path---tags-php-62fab7a1ba4ae6af1f94.js","253653674957030":"path---tags-drupal-83274c8b626ae1b61289.js","96054509920718":"path---tags-debugging-3790beae542af965275a.js","213168313804358":"path---tags-cloud-9-d4d388fc9c3ac104cac2.js","243669153473081":"path---tags-hack-events-b0f11b07275f762a54a3.js","20956934260092":"path---tags-programming-50bdf8d0b9f9a91bab40.js","129938341775535":"path---tags-coding-competitions-ca880733517beae7f557.js","37651519232682":"path---tags-coding-0b7598f952dde9945092.js","127976405526986":"path---tags-community-206fc7ed35f0d06bc29c.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-592019b4a5dd477f7990.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","79611799117203":"component---src-layouts-index-jsx-19e25614a4d22bbbf0e1.js"}/*]]>*/</script><script>
            
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-97001925-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-97001925-1', 'auto');
      ga('set', 'anonymizeIp', 1);}
      </script><script>/*<![CDATA[*/["/commons-fb600ac171029e118017.js","/app-41292f0edcdeccecb068.js","/path---multilingual-gatsbyjs-58f039f00f809adb7e32.js","/component---src-templates-post-jsx-03c2578b4447572f077c.js","/component---src-layouts-index-jsx-19e25614a4d22bbbf0e1.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>